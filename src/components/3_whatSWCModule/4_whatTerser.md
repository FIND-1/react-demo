ğŸ§© Terser æ˜¯ä»€ä¹ˆ?

> **å®ƒæ˜¯ä¸€ä¸ªç”¨äºâ€œå‹ç¼©ï¼ˆMinifyï¼‰å’Œæ··æ·†ï¼ˆMangleï¼‰JavaScript ä»£ç â€çš„å·¥å…·ï¼Œå¸¸ç”¨äºç”Ÿäº§ç¯å¢ƒæ„å»ºé˜¶æ®µã€‚**

---

#### ğŸ” Terser çš„æ ¸å¿ƒåŠŸèƒ½

#### 1. **å‹ç¼©ï¼ˆMinificationï¼‰**
å°† JS ä»£ç å˜å°ï¼Œå»é™¤ä¸å¿…è¦çš„å­—ç¬¦ï¼š

```js
// å‹ç¼©å‰
function hello(name) {
  console.log("Hello " + name);
}

// å‹ç¼©åï¼ˆterser è¾“å‡ºï¼‰
function hello(n){console.log("Hello "+n)}
```

- å»é™¤ç©ºæ ¼ã€æ¢è¡Œã€æ³¨é‡Š
- ç¼©çŸ­å˜é‡åï¼ˆ`name` â†’ `n`ï¼‰
- ç®€åŒ–è¡¨è¾¾å¼

#### 2. **æ··æ·†ï¼ˆObfuscationï¼‰**
è®©ä»£ç éš¾ä»¥é˜…è¯»å’Œé€†å‘å·¥ç¨‹ï¼ˆå¯é€‰ï¼‰ï¼š
è®©ä»£ç éš¾ä»¥é˜…è¯»å’Œé€†å‘å·¥ç¨‹ï¼ˆå¯é€‰ï¼‰ï¼š

```js
// æ›´æç«¯çš„æ··æ·†ç¤ºä¾‹ï¼ˆå¯é…ç½®ï¼‰
!function(n){console.log("Hello "+n)}("world")
```

#### 3. **è¯­æ³•é™çº§ä¸ Tree Shaking æ”¯æŒ**
- æ”¯æŒ ES6+ è¯­æ³•ï¼ˆå¦‚ç®­å¤´å‡½æ•°ã€è§£æ„ç­‰ï¼‰
- èƒ½å¤„ç†æ¨¡å—åŒ–ä»£ç ï¼ˆCommonJSã€ESMï¼‰
- é…åˆæ‰“åŒ…å™¨å®ç° **Tree Shaking**ï¼ˆæ ‡è®°æ— ç”¨ä»£ç ï¼‰

#### 4. **ä¿ç•™ License æ³¨é‡Š**
æ”¯æŒé€šè¿‡æ³¨é‡ŠæŒ‡ä»¤ä¿ç•™ç‰ˆæƒä¿¡æ¯ï¼š

```js
/*! @license Copyright (c) 2025 MyCompany */
```

---

#### ğŸ› ï¸ Terser åœ¨å‰ç«¯ç¼–è¯‘ä¸­çš„ä½ç½®

åœ¨ç°ä»£å‰ç«¯æ„å»ºæµç¨‹ä¸­ï¼ŒTerser é€šå¸¸å‡ºç°åœ¨ **æ‰“åŒ…ä¹‹åã€è¾“å‡ºä¹‹å‰**ï¼š

```
æºä»£ç  (JS/TSX)
   â†“
[ æ‰“åŒ…å™¨ï¼šWebpack / Vite / Rollup ]
   â†“
ç”Ÿæˆ bundle.jsï¼ˆæœªå‹ç¼©ï¼‰
   â†“
[ Terser ] â† å‹ç¼© JS ä»£ç 
   â†“
bundle.min.jsï¼ˆç”Ÿäº§ç¯å¢ƒå‘å¸ƒï¼‰
```

#### âœ… å…¸å‹ä½¿ç”¨åœºæ™¯ï¼š

| å·¥å…· | æ˜¯å¦é»˜è®¤é›†æˆ Terser |
|------|------------------|
| **Webpack** | âœ… é»˜è®¤ä½¿ç”¨ `terser-webpack-plugin` |
| **Vite** | âœ… ç”Ÿäº§æ„å»ºæ—¶ä½¿ç”¨ `esbuild` æˆ– `terser`ï¼ˆå¯é€‰ï¼‰ |
| **Rollup** | âœ… å¯é€šè¿‡ `rollup-plugin-terser` ä½¿ç”¨ |
| **Parcel** | âœ… å†…ç½®æ”¯æŒ |

ğŸ’¡ Webpack ç¤ºä¾‹ï¼š

```javascript
// webpack.config.js
const TerserPlugin = require('terser-webpack-plugin');

module.exports = {
optimization: {
   minimize: true,
   minimizer: [new TerserPlugin()],
  },
};
```

#### âš™ï¸ Terser å¸¸è§é…ç½®é€‰é¡¹

```javascript
new TerserPlugin({
  terserOptions: {
    compress: {
      drop_console: true,  // åˆ é™¤æ‰€æœ‰ console.log
      drop_debugger: true, // åˆ é™¤ debugger
      pure_funcs: ['console.log'] // æŒ‡å®šè¦åˆ é™¤çš„å‡½æ•°
    },
    format: {
      comments: /@license/i, // ä»…ä¿ç•™å¸¦ @license çš„æ³¨é‡Š
    },
    mangle: true,           // æ··æ·†å˜é‡å
    toplevel: false,        // æ˜¯å¦æ··æ·†é¡¶å±‚å˜é‡
  },
  extractComments: false,   // æ˜¯å¦å°†æ³¨é‡Šæå–åˆ°å•ç‹¬æ–‡ä»¶
});
```
#### å¸¸ç”¨ä¼˜åŒ–ï¼š

- `drop_console: true` â†’ ç§»é™¤æ‰€æœ‰ `console.xxx`
- `drop_debugger: true` â†’ ç§»é™¤ `debugger` è¯­å¥
- `mangle: true` â†’ ç¼©çŸ­å˜é‡åæå‡å‹ç¼©ç‡

---

#### ğŸ†š Terser vs esbuild vs SWC

| å·¥å…·        | è¯­è¨€       | é€Ÿåº¦   | åŠŸèƒ½  | ç”¨é€”                            |
| ----------- | ---------- | ------ | ----- | ------------------------------- |
| **Terser**  | JavaScript | ä¸­ç­‰   | â­â­â­â­â˜† | æœ€æˆç†Ÿï¼ŒWebpack é»˜è®¤            |
| **esbuild** | Go         | âš¡ æå¿« | â­â­â­â˜†â˜† | æ„å»ºå¿«ï¼Œå‹ç¼©ä¹Ÿä¸é”™ï¼ˆVite é»˜è®¤ï¼‰ |
| **SWC**     | Rust       | âš¡ å¾ˆå¿« | â­â­â­â­â˜† | ç±»ä¼¼ Babel + Terserï¼ŒRust å®ç°  |

> - å¼€å‘ç¯å¢ƒæ¨è `esbuild` / `SWC`ï¼ˆå¿«ï¼‰
> - ç”Ÿäº§ç¯å¢ƒä»å¯ç”¨ `Terser`ï¼ˆå‹ç¼©æ›´ç²¾ç»†ï¼‰

---

#### âœ… ä¸ºä»€ä¹ˆéœ€è¦ Terserï¼Ÿ

| ç›®çš„                   | æ•ˆæœ                  |
| ---------------------- | --------------------- |
| ğŸ“¦ å‡å° JS æ–‡ä»¶ä½“ç§¯     | åŠ è½½æ›´å¿«ï¼ŒèŠ‚çœå¸¦å®½    |
| âš¡ æå‡é¡µé¢æ€§èƒ½         | è§£ææ‰§è¡Œæ›´å¿«          |
| ğŸ” ä¿æŠ¤æºç              | é˜²æ­¢è½»æ˜“è¢«é˜…è¯»æˆ–å¤åˆ¶  |
| ğŸŒ ä¼˜åŒ– Lighthouse åˆ†æ•° | æ›´å°çš„èµ„æº = æ›´é«˜è¯„åˆ† |

ä¾‹å¦‚ï¼š
- åŸå§‹æ–‡ä»¶ï¼š`app.js` 300KB
- ç»è¿‡ Terser å‹ç¼©åï¼š`app.min.js` 90KBï¼ˆå‡å°‘ 70%ï¼ï¼‰

---

#### âœ… æ€»ç»“

| é¡¹ç›®         | å†…å®¹                           |
| ------------ | ------------------------------ |
| **åå­—**     | Terser                         |
| **ä½œç”¨**     | å‹ç¼©ã€æ··æ·† JavaScript ä»£ç      |
| **ä½¿ç”¨æ—¶æœº** | ç”Ÿäº§ç¯å¢ƒæ„å»ºé˜¶æ®µ               |
| **å¸¸è§é›†æˆ** | Webpackã€Rollupã€Viteï¼ˆå¯é€‰ï¼‰  |
| **æ ¸å¿ƒä¼˜åŠ¿** | å‡å°ä½“ç§¯ã€æå‡æ€§èƒ½ã€ä¿æŠ¤ä»£ç    |
| **å…³é”®é…ç½®** | `compress`, `mangle`, `format` |

---

ğŸ¯ **ä¸€å¥è¯è®°ä½**ï¼š
> **Terser å°±æ˜¯å‰ç«¯ä¸–ç•Œçš„"ç˜¦èº«å¤§å¸ˆ"â€”â€”æŠŠä½ çš„ JS ä»£ç å‹å¾—åˆå°åˆå¿«ï¼Œä¸“ä¸ºä¸Šçº¿è€Œç”Ÿï¼**

åœ¨æ¯æ¬¡ `npm run build` æ—¶ï¼Œå¾ˆå¯èƒ½å·²ç»æœ‰ Terser åœ¨é»˜é»˜å·¥ä½œäº† ğŸ’ª